<html>
        <div id="toc" style="float:right;width:20%;border:1px solid grey"></div>	

        <h1>Pierwszy</h1>
        <h2>Jeden</h2>
        <h3>A</h3>
        <h3>B</h3>
        <h2>Dwa</h2>
        <h3>A</h3>
        <h3>B</h3>
        <h1>Drugi</h1>
        <h2>Jeden</h2>
        <h3>A</h3>
        <h3>B</h3>
        <h2>Dwa</h2>
        <h3>A</h3>
        <h3>B</h3>
        <h1>Trzeci</h1>
        <h2>Jeden</h2>
        <h3>A</h3>
        <h3>B</h3>
        <h2>Dwa</h2>
        <h3>A</h3>
        <h3>B</h3>
        <h2>Jeden</h2>
        <h3>A</h3>
        <h3>B</h3>
        <h2>Dwa</h2>
        <h3>A</h3>
        <h3>B</h3>
        <h1>Czwarty</h1>
        <h2>Jeden</h2>
        <h3>A</h3>
        <h3>B</h3>
        <h2>Dwa</h2>
        <h3>A</h3>
        <h3>B</h3>
    <script>
        (function()
        {   
            var toc=document.querySelector("#toc");
            var t=document.querySelectorAll("h1,h2");
            var s="";
            var x,id; 
            for(var i=0; i<t.length; i++)
            {   
                x = t[i];
                if(x.id)
                    id = x.id;
                else 
                    id = x.id = i; 	
                s+="<li><a href='#"+id+"'>"+x.innerHTML+"</a></li>";
            }
            toc.innerHTML="<ol>"+s+"</ol>";	
        })();
    </script>
</html>