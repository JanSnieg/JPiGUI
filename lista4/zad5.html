<html>
    <div id="toc" style="float:right;width:20%;border:1px solid grey"></div>

        <h1>Pierwszy</h1>
        <h2>Jeden</h2>
        <h3>A</h3>
        <h3>B</h3>
        <h2>Dwa</h2>
        <h3>A</h3>
        <h3>B</h3>
        <h1>Drugi</h1>
        <h2>Jeden</h2>
        <h3>A</h3>
        <h3>B</h3>
        <h2>Dwa</h2>
        <h3>A</h3>
        <h3>B</h3>
        <h1>Trzeci</h1>
        <h2>Jeden</h2>
        <h3>A</h3>
        <h3>B</h3>
        <h2>Dwa</h2>
        <h3>A</h3>
        <h3>B</h3>
        <h2>Jeden</h2>
        <h3>A</h3>
        <h3>B</h3>
        <h2>Dwa</h2>
        <h3>A</h3>
        <h3>B</h3>
        <h1>Czwarty</h1>
        <h2>Jeden</h2>
        <h3>A</h3>
        <h3>B</h3>
        <h2>Dwa</h2>
        <h3>A</h3>
        <h3>B</h3>
    <script> 
        var toc=document.querySelector("#toc");
        var s="";
        let h1Index = 1;
        let h2Index = 1;
        let h3Index = 1;
        Array.from(document.querySelectorAll('h1,h2')).forEach(element =>
        {
            if(element.tagName == "H1")
            {
                element.id = h1Index;
                s += "<li><a href='#"+element.id+"'>"+h1Index+": "+element.innerHTML+"</a><ol id='ol-"+element.id+"'></ol></li>";
                h1Index++;
                h2Index = 1;
            }
            else if (element.tagName == "H2")
            {
                element.id = `${h1Index - 1}-${h2Index}`;
                s += "<li><a href='#"+element.id+"'>\t"+h1Index+"."+h2Index+": "+element.innerHTML+"</a><ol id='ol-"+element.id+"'></ol></li>";
                h2Index++;
            }
            toc.innerHTML = "<ol>"+s+"</ol>";
        });
    </script>
</html>